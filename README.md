# Сапер

## Требования

* игровое поле состоит из клеток;
* минимальный размер поля 5x5 клеток;
* клетки располагаются в виде прямоугольника или квадрата;
* все клетки изначально закрыты;
* окрытая клетка содержит мину, либо число обозначающее количество мин вокруг;
* если клетка содержит число 0, — ближайшие клетки с этим же числом волнообразно открываются;
* закрытую клетку можно пометить знаком вопроса(неизвестно), либо флажком(здесь мина);
* количество флажков должно соответствовать количеству мин на поле;
* пометки переключаются по следующему правилу: ничего → вопрос → флажок → ничего;
* первый ход не может быть проигрышным;
* игрок должен иметь информацию о количестве оставшихся флажков;
* игрок должен иметь информацию о количестве секунд прошедших с начала игры;
* игра заканчивается, если пользователь открыл клетку с миной(проигрыш), либо открыл все клетки без мин(победа);
* после окончания игры следует показать игроку расположение всех мин;
* после окончания игры появляется окно с сообщением о победе или о проигрыше.

## Решение

### Возможные подходы к организации архитектуры

1. Всё вместе

Логика и представление смешиваются. Этот подход кажется плохим, потому что код станет трудным для понимания, сильно зацепленным, его будет сложно расширять и модифицировать.

2. Разделение на логику и представление

Логика игры отделяется от представления. Такой подход упрощает разработку программы, позволяет быстрее находить ошибки и вносить модификации.

### Реализация

Для создания приложения мною был выбран второй подход. Было разработано два компонента: GUI и mslib. 

Первый компонент(GUI) содержит классы, отвечающие за представление:

* SettingsWindow — окно настройки, в котором можно выбрать размер поля;
* Field — игровое поле;
* GameWindow — окно на котором отображается виджет Field, количество оставшихся флагов, время прошедшее с начала игры и кнопка перезапуска;
* Cell — дочерний класс QPushButton, представляет клетку игрового поля;
* GameSettings — настройки игрового поля.

Классы, содержащиеся во втором компоненте(mslib), описывают логику:

* Minesweeper::Game — игра;
* Minesweeper::Cell — клетка поля;
* другие вспомогательные классы.

Связь между двумя компонентами осуществляется с помощью сигналов и слотов.
